jQuery(document).ready((function($){var ld_typenow="",cb_form_unsaved=!1,builder_items_count=0,builder_items_points=0,ld_builder_new_step_ajax_pid="",touchEvent="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?"touchstart":"hover";if(jQuery("#learndash_builder_box_wrap").length&&(jQuery("#learndash_builder_box_wrap").data("ld-course-id"),ld_typenow=jQuery("#learndash_builder_box_wrap").data("ld-typenow")),jQuery("#learndash_builder_box_wrap .learndash_selectors").length){if(jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container").each((function(index,item){0==index?jQuery(".learndash-selector-post-listing",item).slideDown("slow",(function(){jQuery(".learndash-selector-header .ld-course-builder-action-show-hide",item).removeClass("ld-course-builder-action-show"),jQuery(".learndash-selector-header .ld-course-builder-action-show-hide",item).addClass("ld-course-builder-action-hide")})):(jQuery(".learndash-selector-post-listing",item).hide(),jQuery(".learndash-selector-header .ld-course-builder-action-show-hide",item).addClass("ld-course-builder-action-show"),jQuery(".learndash-selector-header .ld-course-builder-action-show-hide",item).removeClass("ld-course-builder-action-hide"));var selector_type=jQuery(item).data("ld-type");void 0!==selector_type&&(selector_update_disabled_items(selector_type),selector_update_empty(selector_type))})),jQuery("#learndash_builder_box_wrap .learndash_selectors").on("click",".ld-course-builder-action-show-hide",(function(event,action){event.stopImmediatePropagation();var parent_title_el=jQuery(event.currentTarget).parents("h3"),parent_items_el=jQuery(parent_title_el).parent(),post_listing=jQuery(parent_items_el).find(".learndash-selector-post-listing");(void 0===action||"open"!=action&&"close"!=action)&&(action=jQuery(post_listing).is(":visible")?"close":"open");"open"==action?jQuery(post_listing).slideDown("slow",(function(){jQuery(event.currentTarget).removeClass("ld-course-builder-action-show"),jQuery(event.currentTarget).addClass("ld-course-builder-action-hide")})):jQuery(post_listing).slideUp("slow",(function(){jQuery(event.currentTarget).addClass("ld-course-builder-action-show"),jQuery(event.currentTarget).removeClass("ld-course-builder-action-hide")}))})),jQuery("#learndash_builder_box_wrap .learndash_selectors").on("click","li",(function(event){!function(el){if(""!==el){var selector_container=jQuery(el).closest(".learndash-selector-container");if(void 0!==selector_container)jQuery(selector_container).data("ld-type")}}(event.currentTarget);jQuery(event.currentTarget).hasClass("ld-disabled")||jQuery(event.currentTarget).hasClass("ld-selected")?jQuery(event.currentTarget).removeClass("ld-selected"):jQuery(event.currentTarget).addClass("ld-selected")})),jQuery("#learndash_builder_box_wrap").on("click",".learndash_selectors .pager-info button",(function(e){e.stopImmediatePropagation();var selector_container=jQuery(e.currentTarget).parents(".learndash-selector-container");if(void 0!==selector_container){var selector_type=jQuery(selector_container).data("ld-type");if(void 0!==selector_type){var selector_paged=jQuery(e.currentTarget).data("page");void 0===selector_type&&(selector_paged=1),function(selector_paged,selector_type,selector_container){var post_data={action:"learndash_builder_selector_pager",builder_data:get_builder_asset_post_data(),builder_query_args:{post_type:selector_type,paged:selector_paged}};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:post_data,error:function(jqXHR,textStatus,errorThrown){},success:function(reply_data){void 0!==reply_data&&(void 0!==reply_data.selector_pager&&jQuery(".pager-info",selector_container).html(reply_data.selector_pager),void 0!==reply_data.selector_rows&&(jQuery("ul.learndash-selector-post-listing",selector_container).html(reply_data.selector_rows),jQuery("ul.learndash-selector-post-listing li",selector_container).draggable(draggable_objects[selector_type]),selector_update_disabled_items(selector_type)))}})}(selector_paged,selector_type,selector_container)}}return!1})),jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-search input").length){var search_interval_ref,search_el=null,search_value="",search_width=null;jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-search input").focus((function(e){var selector_container=jQuery(e.currentTarget).parents(".learndash-selector-container");void 0!==selector_container&&(void 0!==jQuery(selector_container).data("ld-type")&&(search_el=jQuery(this),search_width=search_el.width(),console.log("search_width[%o]",search_width),jQuery(".learndash-selector-pager",selector_container).hide(),jQuery(".learndash-selector-search",selector_container).width("100%"),search_interval_ref=setInterval((function(){var search_value_tmp=search_el.val();if((0==search_value_tmp.length&&search_value!=search_value_tmp||search_value_tmp.length>=3&&search_value!=search_value_tmp)&&selector_search(selector_container,search_value=search_value_tmp),!search_el.is(":focus"))return clearInterval(search_interval_ref),jQuery(".learndash-selector-pager",selector_container).show(),void jQuery(".learndash-selector-search",selector_container).width(search_width+"px")}),250)))}))}}function selector_search(selector_container,search_value){if(void 0!==selector_container&&void 0!==search_value){var selector_type=jQuery(selector_container).data("ld-type");if(void 0!==selector_type){var post_data={action:"learndash_builder_selector_search",builder_data:get_builder_asset_post_data(),builder_query_args:{post_type:selector_type,paged:1,s:search_value}};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:post_data,error:function(jqXHR,textStatus,errorThrown){},success:function(reply_data){void 0!==reply_data&&void 0!==reply_data.selector_rows&&(jQuery("ul.learndash-selector-post-listing",selector_container).html(reply_data.selector_rows),jQuery("ul.learndash-selector-post-listing li",selector_container).draggable(draggable_objects[selector_type]),selector_update_disabled_items(selector_type))}})}}}var draggable_objects=[];function ld_course_builder_draggable_helper(selected){var container=$("<div/>").attr("id","ld-selector-draggable-group");if(void 0!==selected&&selected.length){var max_width=0;jQuery(selected).each((function(selected_idx,selected_el){jQuery(".ld-course-builder-sub-actions",selected_el).hide();var el_width=jQuery(selected_el).outerWidth();el_width>max_width&&(max_width=el_width)})),container.css("list-style","none"),container.css("width",max_width+"px"),container.append(selected.clone())}return container}draggable_objects["sfwd-lessons"]={cancel:".ld-disabled",handle:".ld-course-builder-action-lesson-move",connectToSortable:"#learndash_builder_box_wrap .ld-course-builder-lesson-items",helper:function(){var selected=jQuery("#learndash-selector-post-listing-sfwd-lessons li.ld-selected");return 0===selected.length&&(selected=$(this)),ld_course_builder_draggable_helper(selected)}},draggable_objects["sfwd-topic"]={cancel:".ld-disabled",handle:".ld-course-builder-action-topic-move",connectToSortable:"#learndash_builder_box_wrap .ld-course-builder-topic-items",helper:function(){var selected=jQuery("#learndash-selector-post-listing-sfwd-topic li.ld-selected");return 0===selected.length&&(selected=$(this)),ld_course_builder_draggable_helper(selected)}},draggable_objects["sfwd-quiz"]={cancel:".ld-disabled",handle:".ld-course-builder-action-quiz-move",connectToSortable:"#learndash_builder_box_wrap .ld-course-builder-quiz-items",helper:function(){var selected=jQuery("#learndash-selector-post-listing-sfwd-quiz li.ld-selected");return 0===selected.length&&(selected=$(this)),ld_course_builder_draggable_helper(selected)}},draggable_objects["sfwd-question"]={cancel:".ld-disabled",handle:".ld-course-builder-action-question-move",connectToSortable:"#learndash_builder_box_wrap .ld-course-builder-question-items",helper:function(){var selected=jQuery("#learndash-selector-post-listing-sfwd-question li.ld-selected");return 0===selected.length&&(selected=$(this)),ld_course_builder_draggable_helper(selected)}};var sortable_objects=[];function update_builder_items_element(){cb_form_unsaved=!0,builder_items_count=0,builder_items_points=0;var builder_elements=function(){var builder_items=new Object;if(jQuery("#learndash_builder_box_wrap .learndash_builder_items .ld-course-builder-lesson-items").length){jQuery("#learndash_builder_box_wrap .learndash_builder_items .ld-course-builder-lesson-items").children().each((function(lesson_item_idx,lesson_item){var lesson_id=jQuery(lesson_item).data("ld-id");builder_items_count+=1,builder_items["sfwd-lessons:"+lesson_id.toString()]={},jQuery(".ld-course-builder-lesson-topic-items",lesson_item).children().each((function(topic_item_idx,topic_item){var topic_id=jQuery(topic_item).data("ld-id");builder_items_count+=1,builder_items["sfwd-lessons:"+lesson_id.toString()]["sfwd-topic:"+topic_id.toString()]={},jQuery(".ld-course-builder-topic-quiz-items",topic_item).children().each((function(topic_quiz_item_idx,topic_quiz_item){var topic_quiz_id=jQuery(topic_quiz_item).data("ld-id");builder_items["sfwd-lessons:"+lesson_id.toString()]["sfwd-topic:"+topic_id.toString()]["sfwd-quiz:"+topic_quiz_id.toString()]={}}))})),jQuery(".ld-course-builder-lesson-quiz-items",lesson_item).children().each((function(lesson_quiz_item_idx,lesson_quiz_item){var lesson_quiz_id=jQuery(lesson_quiz_item).data("ld-id");builder_items["sfwd-lessons:"+lesson_id.toString()]["sfwd-quiz:"+lesson_quiz_id.toString()]={}}))}));var has_global_quizzes=!1;jQuery("#learndash_builder_box_wrap .learndash_builder_items .ld-course-builder-course-quiz-items").children().each((function(quiz_item_idx,quiz_item){var quiz_id=jQuery(quiz_item).data("ld-id");has_global_quizzes=!0,builder_items["sfwd-quiz:"+quiz_id.toString()]={}})),1==has_global_quizzes&&(builder_items_count+=1)}else jQuery("#learndash_builder_box_wrap .learndash_builder_items .ld-course-builder-question-items").length&&jQuery("#learndash_builder_box_wrap .learndash_builder_items .ld-course-builder-question-items").children().each((function(question_item_idx,question_item){var question_id=jQuery(question_item).data("ld-id"),points=jQuery(".ld-course-builder-points",question_item).data("ld-points");builder_items_points=parseInt(builder_items_points)+parseInt(points),builder_items_count+=1,builder_items["sfwd-question:"+question_id.toString()]={}}));return builder_items}();jQuery("#learndash_builder_box_wrap .learndash_builder_items .learndash_builder_items_total .learndash_builder_items_total_value").html(builder_items_count),jQuery("#learndash_builder_box_wrap .learndash_builder_items .learndash_builder_points_total_value").html(builder_items_points);var builder_elements_str=JSON.stringify(builder_elements);("sfwd-courses"==ld_typenow||"sfwd-quiz"==ld_typenow)&&jQuery("#learndash_builder_box_wrap input#learndash_builder_data").val(builder_elements_str)}sortable_objects["sfwd-lessons"]={items:"> div.ld-course-builder-lesson-item",handle:".ld-course-builder-action-lesson-move",tolerance:"pointer",opacity:.7,revert:300,delay:150,dropOnEmpty:!0,placeholder:"movable-placeholder",start:function(e,ui){ui.placeholder.height(ui.helper.outerHeight()),jQuery("li",ui.helper).css("clear","both"),jQuery("span.ld-course-builder-sub-actions",ui.helper).hide()},stop:function(event,ui){if("ld-selector-draggable-group"==jQuery(ui.item).attr("id")){var new_lessons="",ld_selected=jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-lessons").data("ld-selected");void 0===ld_selected&&(ld_selected=[]),ui.item.children("li").each((function(){var selector_type,selected_id,selected,element_ld_id=jQuery(this).data("ld-id");ld_selected.push(parseInt(element_ld_id)),jQuery("span.ld-course-builder-sub-actions",this).hide(),new_lessons=new_lessons+'<div id="ld-course-builder-lesson-item-'+element_ld_id+'" class="ld-course-builder-item ld-course-builder-lesson-item" data-ld-type="sfwd-lessons" data-ld-id="'+element_ld_id+'">'+jQuery(this).html()+"</div>",void 0!==element_ld_id&&(selector_set_item_disabled("sfwd-lessons",element_ld_id,!0),selected_id=element_ld_id,selected=!1,""===(selector_type="sfwd-lessons")&&""===selected_id||(!0===selected?jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-"+selector_type+' ul.learndash-selector-post-listing li[data-ld-id="'+selected_id+'"]').addClass("ld-selected"):jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-"+selector_type+' ul.learndash-selector-post-listing li[data-ld-id="'+selected_id+'"]').removeClass("ld-selected")))})),jQuery(ui.item).replaceWith(new_lessons),jQuery("#learndash_builder_box_wrap .ld-course-builder-topic-items").sortable(sortable_objects["sfwd-topic"]),jQuery("#learndash_builder_box_wrap .ld-course-builder-quiz-items").sortable(sortable_objects["sfwd-quiz"]),ld_selected=jQuery.unique(ld_selected),jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-lessons").data("ld-selected",ld_selected),update_builder_items_element()}else jQuery("span.ld-course-builder-sub-actions",ui.item).hide(),update_builder_items_element()}},sortable_objects["sfwd-topic"]={items:"> div.ld-course-builder-topic-item",handle:".ld-course-builder-action-topic-move",connectWith:".ld-course-builder-topic-items",placeholder:"movable-placeholder",tolerance:"pointer",opacity:.7,revert:300,delay:150,dropOnEmpty:!0,start:function(e,ui){ui.placeholder.height(ui.helper.outerHeight()),ui.placeholder.width("100%"),jQuery("span.ld-course-builder-sub-actions",ui.helper).hide()},stop:function(event,ui){if("ld-selector-draggable-group"==jQuery(ui.item).attr("id")){var new_lessons="",ld_selected=jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-topic").data("ld-selected");void 0===ld_selected&&(ld_selected=[]),ui.item.children("li").each((function(){var element_ld_id=jQuery(this).data("ld-id");ld_selected.push(parseInt(element_ld_id)),jQuery("span.ld-course-builder-sub-actions",this).hide(),new_lessons=new_lessons+'<div id="ld-course-builder-topic-item-'+element_ld_id+'" class="ld-course-builder-item ld-course-builder-topic-item" data-ld-type="sfwd-topic" data-ld-id="'+element_ld_id+'">'+jQuery(this).html()+"</div>",void 0!==element_ld_id&&(selector_set_item_disabled("sfwd-topic",element_ld_id,!0),jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-topic li#ld-post-"+element_ld_id).removeClass("ld-selected"))})),jQuery(ui.item).replaceWith(new_lessons),jQuery("#learndash_builder_box_wrap .ld-course-builder-quiz-items").sortable(sortable_objects["sfwd-quiz"]),ld_selected=jQuery.unique(ld_selected),jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-topic").data("ld-selected",ld_selected),update_builder_items_element()}else jQuery(ui.item).addClass("ld-course-builder-item-update"),jQuery("span.ld-course-builder-sub-actions",ui.item).hide(),update_builder_items_element()}},sortable_objects["sfwd-quiz"]={items:"> div.ld-course-builder-quiz-item",handle:".ld-course-builder-action-quiz-move",connectWith:".ld-course-builder-quiz-items",placeholder:"movable-placeholder",tolerance:"pointer",opacity:.7,revert:300,delay:150,dropOnEmpty:!0,start:function(e,ui){ui.placeholder.height(ui.helper.outerHeight()),ui.placeholder.width("100%"),jQuery("span.ld-course-builder-sub-actions",ui.helper).hide()},stop:function(event,ui){var element_id=jQuery(ui.item).attr("id");if("ld-selector-draggable-group"==element_id){var new_lessons="",ld_selected=jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-quiz").data("ld-selected");void 0===ld_selected&&(ld_selected=[]),ui.item.children("li").each((function(){var element_ld_id=jQuery(this).data("ld-id");ld_selected.push(parseInt(element_ld_id)),jQuery("span.ld-course-builder-sub-actions",this).hide(),new_lessons=new_lessons+'<div id="ld-course-builder-quiz-item-'+element_ld_id+'" class="ld-course-builder-item ld-course-builder-quiz-item" data-ld-type="sfwd-quiz" data-ld-id="'+element_ld_id+'">'+jQuery(this).html()+"</div>",void 0!==element_ld_id&&(selector_set_item_disabled("sfwd-quiz",element_ld_id,!0),jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-quiz li#ld-post-"+element_ld_id).removeClass("ld-selected"))})),jQuery(ui.item).replaceWith(new_lessons),ld_selected=jQuery.unique(ld_selected),jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-quiz").data("ld-selected",ld_selected),update_builder_items_element()}else"ld-draggable-builder-group"==element_id?ui.item.children("div").each((function(){jQuery(this).removeClass("ld-selected")})):(jQuery(ui.item).addClass("ld-course-builder-item-update"),jQuery("span.ld-course-builder-sub-actions",ui.item).hide(),update_builder_items_element())}},sortable_objects["sfwd-question"]={items:"> div.ld-course-builder-question-item",handle:".ld-course-builder-action-question-move",connectWith:".ld-course-builder-question-items",placeholder:"movable-placeholder",tolerance:"pointer",opacity:.7,revert:300,delay:150,dropOnEmpty:!0,start:function(e,ui){ui.placeholder.height(ui.helper.outerHeight()),ui.placeholder.width("100%"),jQuery("span.ld-course-builder-sub-actions",ui.helper).hide()},stop:function(event,ui){var element_id=jQuery(ui.item).attr("id");if("ld-selector-draggable-group"==element_id){var new_lessons="",ld_selected=jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-question").data("ld-selected");void 0===ld_selected&&(ld_selected=[]),ui.item.children("li").each((function(){var element_ld_id=jQuery(this).data("ld-id");ld_selected.push(parseInt(element_ld_id)),jQuery("span.ld-course-builder-sub-actions",this).hide(),new_lessons=new_lessons+'<div id="ld-course-builder-question-item-'+element_ld_id+'" class="ld-course-builder-item ld-course-builder-question-item" data-ld-type="sfwd-question" data-ld-id="'+element_ld_id+'">'+jQuery(this).html()+"</div>",void 0!==element_ld_id&&(selector_set_item_disabled("sfwd-question",element_ld_id,!0),jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-question li#ld-post-"+element_ld_id).removeClass("ld-selected"))})),jQuery(ui.item).replaceWith(new_lessons),ld_selected=jQuery.unique(ld_selected),jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-question").data("ld-selected",ld_selected),update_builder_items_element()}else"ld-draggable-builder-group"==element_id?ui.item.children("div").each((function(){jQuery(this).removeClass("ld-selected")})):(jQuery(ui.item).addClass("ld-course-builder-item-update"),jQuery("span.ld-course-builder-sub-actions",ui.item).hide(),update_builder_items_element())}},jQuery("#learndash_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-sfwd-lessons li").draggable(draggable_objects["sfwd-lessons"]),jQuery("#learndash_builder_box_wrap .learndash_builder_items .ld-course-builder-lesson-items").sortable(sortable_objects["sfwd-lessons"]),jQuery("#learndash_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-sfwd-topic li").draggable(draggable_objects["sfwd-topic"]),jQuery("#learndash_builder_box_wrap .ld-course-builder-topic-items").sortable(sortable_objects["sfwd-topic"]),jQuery("#learndash_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-sfwd-quiz li").draggable(draggable_objects["sfwd-quiz"]),jQuery("#learndash_builder_box_wrap .ld-course-builder-quiz-items").sortable(sortable_objects["sfwd-quiz"]),jQuery("#learndash_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-sfwd-question li").draggable(draggable_objects["sfwd-question"]),jQuery("#learndash_builder_box_wrap .ld-course-builder-question-items").sortable(sortable_objects["sfwd-question"]),jQuery("#learndash_builder_box_wrap .learndash_builder_items").on("click",".ld-course-builder-action-show-hide",(function(e,action){e.stopImmediatePropagation();var builder_item=jQuery(e.currentTarget).parents(".ld-course-builder-item").first(),closest_sub_items=jQuery(builder_item).find(".ld-course-builder-sub-items").first();(void 0===action||"open"!=action&&"close"!=action)&&(action=jQuery(closest_sub_items).is(":visible")?"close":"open");"open"==action?jQuery(closest_sub_items).slideDown("slow",(function(){jQuery(e.currentTarget).removeClass("ld-course-builder-action-show"),jQuery(e.currentTarget).addClass("ld-course-builder-action-hide")})):jQuery(closest_sub_items).slideUp("slow",(function(){jQuery(e.currentTarget).addClass("ld-course-builder-action-show"),jQuery(e.currentTarget).removeClass("ld-course-builder-action-hide")}))})),jQuery("#learndash_builder_box_wrap .learndash_builder_items").on("click",".ld-course-builder-action-remove",(function(event){var remove_item=jQuery(event.currentTarget).closest(".ld-course-builder-item");if(void 0===remove_item||""===remove_item)return;var remove_item_id=jQuery(remove_item).attr("data-ld-id"),remove_item_type=jQuery(remove_item).attr("data-ld-type"),confirm_title=get_builder_asset_message("confirm_remove_"+remove_item_type);""===confirm_title&&(confirm_title="Confirm delete");var remove_item_title=jQuery("span.ld-course-builder-title-text",remove_item).html();""!==remove_item_title&&(confirm_title+="\r\n\r\n"+remove_item_title);if(confirm(confirm_title)){var child_items=jQuery(remove_item).find(".ld-course-builder-item");void 0!==child_items&&jQuery(child_items).each((function(child_item_idx,child_item){var item_type=jQuery(child_item).attr("data-ld-type"),item_id=jQuery(child_item).attr("data-ld-id");void 0!==item_type&&void 0!==item_id&&selector_set_item_disabled(item_type,item_id,!1)})),selector_set_item_disabled(remove_item_type,remove_item_id,!1),jQuery(remove_item).remove(),update_builder_items_element()}})),jQuery("#learndash_builder_box_wrap .learndash_selectors").on("click",".ld-course-builder-action-trash",(function(event){var trash_item=jQuery(event.currentTarget).closest("li");if(void 0===trash_item||""===trash_item)return;var trash_item_id=jQuery(trash_item).attr("data-ld-id"),trash_item_type=jQuery(trash_item).attr("data-ld-type"),confirm_title=get_builder_asset_message("confirm_trash_"+trash_item_type);""===confirm_title&&(confirm_title="Confirm delete");var trash_item_title=jQuery("span.ld-course-builder-title-text",trash_item).html();""!==trash_item_title&&(confirm_title+="\r\n\r\n"+trash_item_title);if(confirm(confirm_title)){jQuery(trash_item).remove(),selector_update_empty(trash_item_type);var post_data={action:"learndash_builder_selector_step_trash",builder_data:get_builder_asset_post_data(),builder_query_args:{post_id:trash_item_id,post_type:trash_item_type}};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:post_data,error:function(jqXHR,textStatus,errorThrown){},success:function(reply_data){void 0!==reply_data&&reply_data.status}})}})),window.onbeforeunload=function(){if(void 0!==learndash_builder_assets[ld_typenow].post_data.builder_editor&&"classic"===learndash_builder_assets[ld_typenow].post_data.builder_editor&&!0===cb_form_unsaved){var learndash_unload_message=get_builder_asset_message("learndash_unload_message");if(void 0!==learndash_unload_message&&""!==learndash_unload_message)return learndash_unload_message}};var parent_form=jQuery("#learndash_builder_box_wrap").parents("form");function builder_step_show_element_actions(event){event.stopImmediatePropagation();var element_move_action=jQuery(event.currentTarget),sub_actions=jQuery(".ld-course-builder-sub-actions",element_move_action);if(void 0!==sub_actions&&void 0===jQuery(element_move_action).closest("div#ld-selector-draggable-group").attr("id"))if(jQuery(sub_actions).is(":visible"))"touchstart"==touchEvent&&jQuery(sub_actions).hide();else{"touchstart"==touchEvent&&jQuery("#learndash_builder_box_wrap .ld-course-builder-sub-actions").hide();var pos=jQuery(element_move_action).position(),width=jQuery(element_move_action).outerWidth(),sub_actions_width=jQuery(sub_actions).outerWidth();if(jQuery("body").hasClass("rtl"))var position_left=pos.left-sub_actions_width+5+"px";else position_left=pos.left+width+"px";jQuery(sub_actions).css({"background-color":"#B8B8B8",height:"20px",position:"absolute",top:pos.top+"px",left:position_left}).show()}}function builder_step_hide_element_actions(event){var element_move_action=jQuery(event.currentTarget),sub_actions=jQuery(".ld-course-builder-sub-actions",element_move_action);void 0!==sub_actions&&jQuery(sub_actions).hide()}function selector_update_disabled_items(selector_type,disabled_ids){if(""!==selector_type){var selector_container=jQuery('#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container[data-ld-type="'+selector_type+'"]');if(void 0!==selector_container){var selected_items=jQuery(selector_container).data("ld-selected");void 0!==selected_items&&selected_items.length&&jQuery.each(selected_items,(function(index,value){selector_set_item_disabled(selector_type,value,!0)}))}}}function selector_update_empty(selector_type){if(""!==selector_type){var selector_container=jQuery('#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container[data-ld-type="'+selector_type+'"]');jQuery("ul#learndash-selector-post-listing-"+selector_type+" li",selector_container).length?(jQuery(".learndash-selector-pager",selector_container).show(),jQuery(".learndash-selector-search",selector_container).show()):(jQuery(".learndash-selector-pager",selector_container).hide(),jQuery(".learndash-selector-search",selector_container).hide())}}function selector_set_item_disabled(selector_type,selected_id,disabled){if(""!==selector_type&&""!==selected_id){var disabled_items=jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-"+selector_type).data("ld-selected");void 0===disabled_items&&(disabled_items=[]);var changed=!1;!0===disabled?(jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-"+selector_type+' ul.learndash-selector-post-listing li[data-ld-id="'+selected_id+'"]').addClass("ld-disabled"),-1===disabled_items.indexOf(parseInt(selected_id))&&(disabled_items.push(parseInt(selected_id)),changed=!0)):(jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-"+selector_type+' ul.learndash-selector-post-listing li[data-ld-id="'+selected_id+'"]').removeClass("ld-disabled"),disabled_items=disabled_items.filter((function(e){return e!==parseInt(selected_id)})),changed=!0),1==changed&&jQuery("#learndash_builder_box_wrap .learndash_selectors .learndash-selector-container-"+selector_type).data("ld-selected",disabled_items)}}function get_builder_asset_message(message_key){if(void 0!==learndash_builder_assets[ld_typenow].messages)return void 0!==message_key&&void 0!==learndash_builder_assets[ld_typenow].messages[message_key]?learndash_builder_assets[ld_typenow].messages[message_key]:learndash_builder_assets[ld_typenow].messages}function get_builder_asset_post_data(data_key){if(void 0!==learndash_builder_assets[ld_typenow].post_data)return void 0!==data_key&&void 0!==learndash_builder_assets[ld_typenow].post_data[data_key]?learndash_builder_assets[ld_typenow].post_data[data_key]:learndash_builder_assets[ld_typenow].post_data}void 0!==parent_form&&jQuery(parent_form).submit((function(){cb_form_unsaved=!1})),"hover"==touchEvent?(jQuery("#learndash_builder_box_wrap .learndash_builder_items").on("mouseover",".ld-course-builder-actions",builder_step_show_element_actions),jQuery("#learndash_builder_box_wrap .learndash_builder_items").on("mouseleave",".ld-course-builder-actions",builder_step_hide_element_actions),jQuery("#learndash_builder_box_wrap .learndash_selectors").on("mouseover",".ld-course-builder-actions",builder_step_show_element_actions),jQuery("#learndash_builder_box_wrap .learndash_selectors").on("mouseleave",".ld-course-builder-actions",builder_step_hide_element_actions)):"touchstart"==touchEvent&&(jQuery("#learndash_builder_box_wrap .learndash_builder_items").on("click",".ld-course-builder-actions",builder_step_show_element_actions),jQuery("#learndash_builder_box_wrap .learndash_selectors").on("click",".ld-course-builder-actions",builder_step_show_element_actions)),jQuery("#learndash_builder_box_wrap").on("mouseover",".ld-course-builder-title",(function(event){event.stopImmediatePropagation();var show_pencil=!0,parent_el=jQuery(event.currentTarget).closest(".ld-course-builder-item")[0];void 0!==parent_el&&(jQuery(parent_el).hasClass("ld-disabled")&&(show_pencil=!1),jQuery(parent_el).hasClass("ld-course-builder-title-edit")&&(show_pencil=!1),1==show_pencil&&jQuery(".ld-course-builder-edit-title-pencil",event.currentTarget).show())})),jQuery("#learndash_builder_box_wrap").on("mouseleave",".ld-course-builder-title",(function(event){event.stopImmediatePropagation(),jQuery(".ld-course-builder-edit-title-pencil",event.currentTarget).hide()})),jQuery("#learndash_builder_box_wrap").on("click",".ld-course-builder-title",(function(event){event.stopImmediatePropagation();var title_el=event.currentTarget,parent_el=jQuery(title_el).parents(".ld-course-builder-item");if(void 0!==parent_el){if(jQuery(parent_el).hasClass("ld-disabled"))return;if(jQuery(parent_el).hasClass("ld-course-builder-title-edit"))return;jQuery(parent_el).addClass("ld-course-builder-title-edit"),jQuery(parent_el).hasClass("ld-selected")&&jQuery(parent_el).removeClass("ld-selected"),jQuery(".ld-course-builder-actions",parent_el).hide();var title_org=jQuery(".ld-course-builder-title-text",title_el).html();function handle_title_save(event_confirm){event_confirm.stopImmediatePropagation();var parent_el=jQuery(event_confirm.currentTarget).parents(".ld-course-builder-item");jQuery(parent_el).removeClass("ld-course-builder-title-edit");var title_new=jQuery(".ld-course-builder-title-text input",title_el).val();if(jQuery(".ld-course-builder-title-text input",title_el).remove(),jQuery(".ld-course-builder-edit-title-ok",title_el).hide(),jQuery(".ld-course-builder-edit-title-cancel",title_el).hide(),jQuery(".ld-course-builder-actions",parent_el).show(),""!=title_new&&title_new!=title_org){if(jQuery(".ld-course-builder-title-text",title_el).html(title_new),title_org=title_new,void 0!==(parent_el=jQuery(title_el).parents(".ld-course-builder-item"))){var step_id=jQuery(parent_el).data("ld-id"),step_type=jQuery(parent_el).data("ld-type"),post_data={action:"learndash_builder_selector_step_title",builder_data:get_builder_asset_post_data(),builder_query_args:{new_title:title_new,post_id:step_id,post_type:step_type}};console.log("post_data[%o]",post_data),jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:post_data,error:function(jqXHR,textStatus,errorThrown){},success:function(reply_data){if(void 0!==reply_data.status&&!0===reply_data.status){var selector_item=jQuery("#learndash_builder_box_wrap .learndash_selectors li#ld-post-"+step_id);jQuery(".ld-course-builder-title-text",selector_item).html(title_new);var builder_item=jQuery("#learndash_builder_box_wrap .learndash_builder_items #ld-post-"+step_id);jQuery(".ld-course-builder-title-text",builder_item).first().html(title_new)}}})}}else jQuery(".ld-course-builder-title-text",title_el).html(title_org)}jQuery(".ld-course-builder-title-text",title_el).html('<input type="text" value="'+title_org+'" />'),jQuery(".ld-course-builder-title-text input",title_el).focus(),jQuery(".ld-course-builder-title-text input",title_el).select(),jQuery(".ld-course-builder-edit-title-pencil",title_el).hide(),jQuery(".ld-course-builder-edit-title-ok",title_el).show(),jQuery(".ld-course-builder-edit-title-cancel",title_el).show(),jQuery(title_el).on("click",".ld-course-builder-edit-title-ok",(function(event_confirm){handle_title_save(event_confirm)})),jQuery(title_el).on("keypress",":focus",(function(event_confirm){13==event_confirm.keyCode&&handle_title_save(event_confirm)})),jQuery(title_el).on("click",".ld-course-builder-edit-title-cancel",(function(event_cancel){event_cancel.stopImmediatePropagation();var parent_el=jQuery(event_cancel.currentTarget).parents(".ld-course-builder-item");if(jQuery(parent_el).removeClass("ld-course-builder-title-edit"),jQuery(".ld-course-builder-title-text input",title_el).remove(),jQuery(".ld-course-builder-edit-title-ok",title_el).hide(),jQuery(".ld-course-builder-edit-title-cancel",title_el).hide(),jQuery(".ld-course-builder-actions",parent_el).show(),jQuery(".ld-course-builder-action-show-hide",parent_el).length){var selector_container=function(el){if(void 0!==el){var selector_container=jQuery(el).closest(".learndash_selectors");if(void 0!==selector_container&&selector_container.length>0)return selector_container[0];var builder_container=jQuery(el).closest(".learndash_builder_items");if(void 0!==builder_container&&builder_container.length>0)return builder_container[0]}}(parent_el);void 0!==selector_container&&jQuery(selector_container).hasClass("learndash_builder_items")&&jQuery(".ld-course-builder-action-show-hide",parent_el).show()}jQuery(".ld-course-builder-title-text",title_el).html(title_org)}))}})),jQuery(".learndash_selectors").on("click",".ld-course-builder-action-add",(function(event){if(event.stopImmediatePropagation(),!jQuery(event.currentTarget).hasClass("ld-course-builder-action-add-pending")){jQuery(event.currentTarget).addClass("ld-course-builder-action-add-pending");var selector_container=jQuery(event.currentTarget).closest(".learndash-selector-container");if(void 0!==selector_container){var selector_show_hide=jQuery(selector_container).find(".ld-course-builder-action-show-hide");jQuery(selector_show_hide).hasClass("ld-course-builder-action-show")&&jQuery(".ld-course-builder-action-show-hide",selector_container).trigger("click",["open"]);var selector_type=jQuery(selector_container).data("ld-type");if(void 0!==selector_type){var new_item_id="new-step-"+(new Date).getTime(),first_item=jQuery(".learndash-row-placeholder li",selector_container).clone();jQuery(first_item).attr("id",new_item_id),jQuery(first_item).attr("data-ld-id",""),jQuery(first_item).removeClass("ld-disabled"),jQuery(first_item).removeClass("ld-selected"),jQuery(first_item).removeClass("ld-course-builder-title-edit"),jQuery(first_item).addClass("ld-new-step");var title_el=jQuery(".ld-course-builder-header .ld-course-builder-title",first_item);jQuery(title_el).hasClass("ld-course-builder-title-edit")&&jQuery('input[type="text"]',title_el).length&&jQuery('input[type="text"]',title_el).remove(),jQuery("#learndash_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-"+selector_type).prepend(first_item),jQuery("#learndash_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-"+selector_type+" li").draggable(draggable_objects[selector_type]),jQuery("#learndash_builder_box_wrap #"+new_item_id+" .ld-course-builder-title-text").trigger("click"),selector_update_empty(selector_type),function builder_trigger_new_steps_ajax(){if(""==ld_builder_new_step_ajax_pid&&jQuery("#learndash_builder_box_wrap .ld-new-step").length){var new_items_set={};if(jQuery("#learndash_builder_box_wrap .ld-new-step").each((function(item_idx,item_el){var new_item={};new_item.item_id=jQuery(item_el).attr("id"),new_item.post_type=jQuery(item_el).data("ld-type"),jQuery('input[type="text"]',item_el).length?new_item.post_title=jQuery('input[type="text"]',item_el).val():new_item.post_title=jQuery(".ld-course-builder-title-text",item_el).val(),new_items_set[new_item.item_id]=new_item})),Object.keys(new_items_set).length>0){var post_data={action:"learndash_builder_selector_step_new",builder_data:get_builder_asset_post_data(),builder_query_args:{new_steps:new_items_set}};ld_builder_new_step_ajax_pid=jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:post_data,error:function(jqXHR,textStatus,errorThrown){},success:function(reply_data){void 0!==reply_data&&void 0!==reply_data.new_steps&&jQuery.each(reply_data.new_steps,(function(old_step_id,new_step_set){jQuery("#learndash_builder_box_wrap #"+old_step_id).length&&jQuery("#learndash_builder_box_wrap #"+old_step_id).hasClass("ld-new-step")&&(jQuery("#learndash_builder_box_wrap #"+old_step_id).removeClass("ld-new-step"),jQuery("#learndash_builder_box_wrap #"+old_step_id).attr("data-ld-id",new_step_set.post_id),jQuery("#learndash_builder_box_wrap #"+old_step_id+" a.ld-course-builder-action-view").attr("href",new_step_set.view_url.replace(/&amp;/g,"&")),jQuery("#learndash_builder_box_wrap #"+old_step_id+" a.ld-course-builder-action-edit").attr("href",new_step_set.edit_url.replace(/&amp;/g,"&")),jQuery("#learndash_builder_box_wrap #"+old_step_id).attr("id","ld-post-"+new_step_set.post_id))})),ld_builder_new_step_ajax_pid="",builder_trigger_new_steps_ajax()}})}}}(),jQuery(event.currentTarget).removeClass("ld-course-builder-action-add-pending")}}}})),jQuery("#learndash_builder_box_wrap .learndash_selectors").on("click",".ld-show-all",(function(event){jQuery("#learndash_builder_box_wrap .learndash_selectors h3.learndash-selector-header .ld-course-builder-action-show-hide").trigger("click",["open"])})),jQuery("#learndash_builder_box_wrap .learndash_selectors").on("click",".ld-hide-all",(function(event){jQuery("#learndash_builder_box_wrap .learndash_selectors h3.learndash-selector-header .ld-course-builder-action-show-hide").trigger("click",["close"])})),jQuery("#learndash_builder_box_wrap .learndash_builder_items").on("click",".ld-show-all",(function(event){jQuery("#learndash_builder_box_wrap .learndash_builder_items .ld-course-builder-action-show-hide").trigger("click",["open"])})),jQuery("#learndash_builder_box_wrap .learndash_builder_items").on("click",".ld-hide-all",(function(event){jQuery("#learndash_builder_box_wrap .learndash_builder_items .ld-course-builder-action-show-hide").trigger("click",["close"])}))}));
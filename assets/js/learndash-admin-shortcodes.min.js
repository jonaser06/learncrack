var learndash_shortcodes=jQuery.extend(learndash_shortcodes||{},{tinymce_editor:null,show_popup_html:function(){if("undefined"!=typeof learndash_admin_shortcodes_assets&&""!=learndash_admin_shortcodes_assets||(learndash_admin_shortcodes_assets={}),jQuery("#learndash_shortcodes_holder").length)learndash_shortcodes.popup_show();else{jQuery("body").append('<div id="learndash_shortcodes_holder" style="display: none;"><div id="learndash_shortcodes"></div></div>');var post_data={action:"learndash_generate_shortcodes_content",atts:learndash_admin_shortcodes_assets};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"html",cache:!1,data:post_data,error:function(jqXHR,textStatus,errorThrown){},success:function(reply_data){void 0!==reply_data&&jQuery("#learndash_shortcodes").html(reply_data),learndash_shortcodes.popup_init(),learndash_shortcodes.popup_show()}})}},popup_show:function(){if("thickbox"===learndash_admin_shortcodes_assets.popup_type){var timymce_url=learndash_shortcodes.get_tinymce_url();tb_show(learndash_admin_shortcodes_assets.popup_title,timymce_url)}else if("jQuery-dialog"===learndash_admin_shortcodes_assets.popup_type){var dWidth=.9*jQuery(window).width(),dHeight=.9*jQuery(window).height();jQuery("#learndash_shortcodes").dialog({title:learndash_admin_shortcodes_assets.popup_title,dialogClass:"wp-dialog ld-shortcodes",autoOpen:!0,draggable:!1,width:dWidth,height:dHeight,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){jQuery(".ui-widget-overlay").bind("click",(function(){jQuery("#my-dialog").dialog("close")}))},create:function(){jQuery(".ui-dialog-titlebar-close").addClass("ui-button")}}),learndash_shortcodes.popup_set_dimensions(),jQuery("#learndash_shortcodes").dialog("open")}},popup_set_dimensions:function(){var dWidth=.9*jQuery(window).width(),dHeight=.9*jQuery(window).height();if(jQuery("#learndash_shortcodes").dialog("option","width",dWidth),jQuery("#learndash_shortcodes").dialog("option","height",dHeight),window.isRtl){var dialog_position_left=parseInt(jQuery(".ui-dialog.ld-shortcodes").css("left")),dialog_position_right=parseInt(jQuery(".ui-dialog.ld-shortcodes").css("right"));dialog_position_right=-1*dialog_position_left,jQuery(".ui-dialog.ld-shortcodes").css("right",dialog_position_right+"px")}},get_tinymce_url:function(){var width=jQuery(window).width(),W=950<width?950:width,H=jQuery(window).height();return"#TB_inline?width="+(W-=80)+"&height="+(H-=84)+"&inlineId=learndash_shortcodes"},tinymce_callback:function(editor){learndash_shortcodes.tinymce_editor=editor,learndash_shortcodes.show_popup_html()},qt_callback:function(){learndash_shortcodes.tinymce_editor=null,learndash_shortcodes.show_popup_html()},popup_init:function(){jQuery("#learndash_shortcodes_tabs a").click((function(e){e.preventDefault(),learndash_shortcodes.tabs_switch(jQuery(this))})),learndash_shortcodes.tabs_switch(jQuery("#learndash_shortcodes a").first()),jQuery("form.learndash_shortcodes_form").submit((function(e){e.preventDefault(),tb_remove(),learndash_shortcodes.popup_submit(this)})),jQuery(window).resize((function(){learndash_shortcodes.popup_set_dimensions()}))},tabs_switch:function(obj){jQuery("#learndash_shortcodes_sections .hidable").hide(),jQuery("#learndash_shortcodes_sections #tabs-"+obj.attr("data-nav")).show(),jQuery("#learndash_shortcodes_tabs li").removeClass("current"),obj.parent().addClass("current")},get_selected_text:function(){var txtarea=document.getElementById("content"),start=txtarea.selectionStart,finish=txtarea.selectionEnd;return txtarea.value.substring(start,finish)},popup_submit:function(form){"jQuery-dialog"===learndash_admin_shortcodes_assets.popup_type&&jQuery("#learndash_shortcodes").dialog("close");var shortcode_slug=jQuery(form).attr("shortcode_slug"),shortcode_type=jQuery(form).attr("shortcode_type");void 0===shortcode_type&&(shortcode_type=1);var content="["+shortcode_slug,elements=form.elements,message="";if(elements.length>0)for(var field_count=0;field_count<elements.length;){var field=elements[field_count];switch(field.type){case"textarea":2==shortcode_type?message=field.value:content+=" "+field.name+'="'+field.value.replace(/"/g,'\\"')+'"';break;case"checkbox":field.checked&&void 0!==field.value&&""!=field.value&&"0"!=field.value&&(content+=" "+field.name+'="'+field.value.replace(/"/g,'\\"')+'"');break;case"submit":break;case"select-multiple":var field_name=jQuery(field).attr("name").replace("[]",""),field_selected_values_str="";jQuery(":selected",field).each((function(i,item){var item_value=jQuery(item).val();void 0!==item_value&&""!=item_value&&(field_selected_values_str.length>0&&(field_selected_values_str+=","),field_selected_values_str+=item_value.replace(/"/g,'\\"'))})),field_selected_values_str.length>0&&(content+=" "+field_name+'="'+field_selected_values_str+'"');break;case"select-one":case"text":default:void 0!==field.value&&""!=field.value&&(content+=" "+field.name+'="'+field.value.replace(/"/g,'\\"')+'"')}field_count+=1}content+="]",2==shortcode_type&&""!=message&&(content+=message,content+="[/"+shortcode_slug+"]"),null!==learndash_shortcodes.tinymce_editor?learndash_shortcodes.tinymce_editor.setContent(content):"undefined"!=typeof QTags&&QTags.insertContent(content)}});